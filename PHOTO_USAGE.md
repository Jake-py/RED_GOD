# 🎬 Как использовать функцию отправки фотографий

## Быстрый старт

Функция отправки фотографий включена автоматически для всех трех типов поиска:

### 1. Поиск по username 👤

```
/osint_username red_ice
```

**Результат:**
- Отправляются все найденные фотографии профилей (если их несколько - как альбом)
- Затем отправляются текстовые результаты поиска

Фотографии извлекаются с платформ:
- GitHub - аватар пользователя
- Twitter - фото профиля
- Instagram - аватар
- LinkedIn - фото профиля
- VK - фото профиля
- Telegram - аватар канала

### 2. Поиск по номеру телефона 📱

```
/osint_phone +79999999999
```

**Результат:**
- Если номер найдется в сервисах с фотографиями профиля (редко), они отправятся как альбом
- Затем текстовые результаты

### 3. Поиск по email 📧

```
/osint_email user@example.com
```

**Результат:**
- Если найдены связанные аккаунты с фотографиями, они отправятся как альбом
- Затем текстовые результаты

## 📸 Как работает отправка фотографий

```
┌─────────────────────────────────┐
│ Запрос поиска (username, phone) │
│         или email               │
└──────────────┬──────────────────┘
               │
               ▼
┌──────────────────────────────┐
│ Поиск и сбор информации      │
└──────────────┬───────────────┘
               │
               ▼
┌──────────────────────────────┐
│ Извлечение URL фотографий    │
│ из результатов поиска        │
└──────────────┬───────────────┘
               │
           ✓ Есть фото?
           /            \
          /              \
        да               нет
        │                 │
        ▼                 ▼
    ┌─────────┐    ┌─────────────┐
    │ 1 фото? │    │ Пропуск     │
    └────┬────┘    │ отправки    │
    /    │    \    └─────────────┘
   /     │     \        │
  да     нет    │       │
  │      │      │       │
  ▼      ▼      │       │
┌──────┬───────┐│       │
│Single│Media  ││       │
│Photo │Group  ││       │
└──┬───┴───┬──┘│       │
   └───┬───┘   │       │
       │       │       │
       └──┬────┘       │
          │            │
          ▼            ▼
    ┌──────────────────────────┐
    │ Отправить текстовые      │
    │ результаты поиска        │
    └──────────┬───────────────┘
               │
               ▼
          ✅ Готово!
```

## 🎨 Примеры интерфейса

### Поиск с несколькими фотографиями:
```
[Альбом с 3 фотографиями]

🔍 Результаты поиска по username: red_ice 💾
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 GitHub (источник данных):
  👤 Имя: Red Ice
  📝 Bio: -
  🏢 Компания: -
  
📍 VK (источник данных):
  👤 Имя: Red Ice
  📝 Bio: OSINT specialist
  🏠 Город: Moscow
  
📍 Telegram (источник данных):
  👤 Имя: Red Ice
  📝 Description: Security specialist
```

### Поиск с одной фотографией:
```
[Одна фотография]

🔍 Результаты поиска по username: github_user
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 GitHub (источник данных):
  👤 Имя: GitHub User
  🏢 Компания: Tech Corp
```

### Поиск без фотографий:
```
🔍 Результаты поиска по email: user@example.com
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✉️ Проверка сервисов:
  ✓ Gmail: Найдено
  ✗ Outlook: Не найдено
  ✓ ProtonMail: Найдено
  ✗ Yandex: Не найдено
```

## ⚙️ Технические детали

### Что происходит при ошибке отправки фото?

Если при отправке фотографий возникает ошибка (сетевая ошибка, URL недоступен и т.д.):
1. Ошибка логируется в debug логи
2. **Отправка текстовых результатов НЕ прерывается**
3. Пользователь все равно получит текстовые результаты

Это обеспечивает надежность бота - поломка фотографий не влияет на основной функционал.

### Максимальное количество фотографий

- Telegram позволяет отправлять максимум 10 фотографий в одном альбоме
- Бот автоматически ограничивает до 10 фотографий: `images[:10]`
- Если найдено больше 10 - отправляются первые 10

### Форматы фотографий

Поддерживаются все стандартные форматы:
- JPEG (.jpg, .jpeg)
- PNG (.png)
- GIF (.gif)
- WebP (.webp)
- BMP (.bmp)
- SVG (.svg)

Telegram автоматически обрабатывает все форматы и отправляет их оптимизированно.

## 🔍 Как отключить фотографии (если нужно)

Если по какой-то причине нужно отключить отправку фотографий:

Отредактируйте файл `src/core/bot.py` и удалите/закомментируйте этот блок в каждом handler:

```python
# Extract and send images if found
images = extract_images_from_result(result)
if images:
    try:
        if len(images) == 1:
            await bot.send_photo(message.chat.id, images[0])
        else:
            media_group = [types.InputMediaPhoto(media=img) for img in images[:10]]
            await bot.send_media_group(message.chat.id, media_group)
    except Exception as e:
        logger.debug(f"Could not send images: {e}")
```

## 📊 Статистика

- **Функция извлечения:** `extract_images_from_result()` - универсальная, работает для всех типов поиска
- **Обновленные handlers:** 3 штуки (username, phone, email)
- **Максимум фото в альбоме:** 10 (ограничение Telegram)
- **Валидация URL:** только http/https протоколы
- **Дубликаты:** автоматически удаляются

## 🚀 Готово к использованию!

Функция полностью интегрирована и готова. Просто запустите бота и используйте обычные команды:

```bash
python main.py
```

Фотографии будут отправляться автоматически! 📸
